(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2136:(e,t,r)=>{Promise.resolve().then(r.bind(r,5351))},5351:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>B});var s=r(5155),a=r(2115),n=r(7725),i=r(2104),o=r(7113),l=r(2317),d=r(1027),c=r(3463),m=r(9795);function u(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,m.QP)((0,c.$)(t))}let f=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),x=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:i=!1,...o}=e,d=i?l.DX:"button";return(0,s.jsx)(d,{className:u(f({variant:a,size:n,className:r})),ref:t,...o})});function p(){let{theme:e,setTheme:t}=(0,o.D)();return(0,s.jsx)("nav",{className:"bg-white dark:bg-gray-800 shadow-md",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"LLM Output Comparison"})}),(0,s.jsx)("div",{children:(0,s.jsxs)(x,{variant:"ghost",size:"icon",onClick:()=>t("dark"===e?"light":"dark"),children:[(0,s.jsx)(n.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,s.jsx)(i.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})})]})})})}x.displayName="Button";let h=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:u("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});h.displayName="Card";let g=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:u("flex flex-col space-y-1.5 p-6",r),...a})});g.displayName="CardHeader";let v=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:u("text-2xl font-semibold leading-none tracking-tight",r),...a})});v.displayName="CardTitle";let b=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:u("text-sm text-muted-foreground",r),...a})});b.displayName="CardDescription";let j=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:u("p-6 pt-0",r),...a})});j.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:u("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter";var y=r(2594),N=r(3565);let w=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(y.bL,{className:u("grid gap-2",r),...a,ref:t})});w.displayName=y.bL.displayName;let k=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(y.q7,{ref:t,className:u("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...a,children:(0,s.jsx)(y.C1,{className:"flex items-center justify-center",children:(0,s.jsx)(N.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});k.displayName=y.q7.displayName;var _=r(6195);let C=(0,d.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),R=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(_.b,{ref:t,className:u(C(),r),...a})});R.displayName=_.b.displayName;let A=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:u("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});A.displayName="Textarea";let L=(0,d.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function S(e){let{className:t,variant:r,...a}=e;return(0,s.jsx)("div",{className:u(L({variant:r}),t),...a})}function D(e){let{comparison:t,onSelection:r,onCommentChange:a,selectedChoice:n,isResponded:i}=e;return(0,s.jsxs)(h,{className:"mb-8",children:[(0,s.jsxs)(g,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)(v,{children:["Comparison #",t.comparison_id]}),i&&(0,s.jsx)(S,{variant:"outline",children:"Responded"})]}),(0,s.jsxs)(b,{children:["Output ID: ",t.output_id]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:t.model_outputs.map((e,t)=>(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,s.jsxs)("h3",{className:"font-bold text-lg mb-2",children:["Answer ",0===t?"A":"B"]}),(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:e.text})]},t))}),(0,s.jsx)("h4",{className:"text-center font-medium mb-4 mt-6",children:"Which answer do you prefer?"}),(0,s.jsxs)(w,{className:"flex justify-center space-x-4 mt-6",value:n||"",onValueChange:e=>r(t.comparison_id,e),children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(k,{value:"left",id:"left"}),(0,s.jsx)(R,{htmlFor:"left",children:"Answer A"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(k,{value:"right",id:"right"}),(0,s.jsx)(R,{htmlFor:"right",children:"Answer B"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(k,{value:"tie",id:"tie"}),(0,s.jsx)(R,{htmlFor:"tie",children:"Tie"})]})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)(R,{htmlFor:"comment",className:"text-sm font-medium",children:"Comments (optional)"}),(0,s.jsx)(A,{id:"comment",placeholder:"Add any comments or explanations about your choice...",className:"mt-2",value:t.comment||"",onChange:e=>a(t.comparison_id,e.target.value)})]})]})]})}let E=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:u("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...n})});function F(e){let{onDataLoaded:t,userSelections:r={},userComments:a={},comparisons:n=[]}=e,i=e=>{let r=[...e].sort(()=>Math.random()-.5);r.forEach(e=>{if(.5>Math.random()){let t=e.model_outputs[0];e.model_outputs[0]=e.model_outputs[1],e.model_outputs[1]=t}}),t(r)};return(0,s.jsx)("div",{className:"space-y-4 mb-8",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(R,{htmlFor:"jsonFile",children:"Load JSON file"}),(0,s.jsx)(E,{id:"jsonFile",type:"file",accept:".json",onChange:e=>{var t;let r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){let e=new FileReader;e.onload=e=>{try{var t;let r=JSON.parse(null===(t=e.target)||void 0===t?void 0:t.result);i(r)}catch(e){alert("Invalid JSON file.")}},e.readAsText(r)}}})]})})}E.displayName="Input";var z=r(773);let O=z.Kq,T=z.bL,M=z.l9,U=a.forwardRef((e,t)=>{let{className:r,sideOffset:a=4,...n}=e;return(0,s.jsx)(z.UC,{ref:t,sideOffset:a,className:u("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...n})});function q(e){let{currentIndex:t,totalComparisons:r,onPrevious:a,onNext:n,userSelections:i,userComments:o,comparisons:l,respondedComparisons:d}=e;return(0,s.jsxs)("div",{className:"space-y-4 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-x-2",children:[(0,s.jsx)(x,{onClick:a,disabled:0===t,children:"Previous"}),(0,s.jsx)(x,{onClick:()=>n(),disabled:t===r-1,children:"Next"})]}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:r>0?"".concat(t+1," / ").concat(r):"No comparisons loaded"}),(0,s.jsx)(O,{children:(0,s.jsxs)(T,{children:[(0,s.jsx)(M,{asChild:!0,children:(0,s.jsx)("div",{className:"inline-block",children:(0,s.jsx)(x,{onClick:()=>{let e=[["comparison_id","output_id","chosen_side","chosen_model_id","comment"]];l.forEach(t=>{let r=t.comparison_id,s=t.output_id,a=i[r]||"",n=o[r]||"",l="";"left"===a?l=t.model_outputs[0].model_id:"right"===a?l=t.model_outputs[1].model_id:"tie"===a&&(l="tie"),e.push([r,s,a,l,n])});let t=new Blob([e.map(e=>e.map(e=>e.includes(",")||e.includes('"')||e.includes("\n")?'"'.concat(e.replace(/"/g,'""'),'"'):e).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download="pairwise_results.csv",s.click(),URL.revokeObjectURL(r)},disabled:0===r||d.size!==r,variant:0===r||d.size!==r?"secondary":"default",children:"Download Results"})})}),(0,s.jsx)(U,{children:0===r?"No comparisons loaded":d.size!==r?"Please answer all ".concat(r," questions before downloading"):"Download your results"})]})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"flex justify-center text-sm text-gray-600 dark:text-gray-400",children:(0,s.jsxs)("span",{children:[d.size," / ",r," responded"]})}),(0,s.jsx)("div",{className:"flex gap-1.5 flex-wrap justify-center",children:l.map((e,r)=>(0,s.jsx)("div",{className:"h-3 w-12 rounded transition-colors cursor-pointer ".concat(d.has(e.comparison_id)?"bg-primary":"bg-secondary"," ").concat(t===r?"ring-1 ring-primary ring-offset-1":""),title:"Question ".concat(r+1).concat(d.has(e.comparison_id)?" - Answered":" - Not answered"),onClick:()=>n(r)},e.comparison_id))})]})]})}function B(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(0),[i,o]=(0,a.useState)({}),[l,d]=(0,a.useState)({}),[c,m]=(0,a.useState)(new Set),u=(e,t)=>{o(r=>({...r,[e]:t})),m(t=>new Set(t).add(e))},f=t=>{"number"==typeof t?n(t):n(t=>Math.min(e.length-1,t+1))};(0,a.useEffect)(()=>{let t=t=>{var s;if(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement||t.altKey||t.metaKey||t.ctrlKey)return;let a=null===(s=e[r])||void 0===s?void 0:s.comparison_id;switch(t.key){case"a":case"A":a&&(t.preventDefault(),u(a,"left"));break;case"b":case"B":a&&(t.preventDefault(),u(a,"right"));break;case"t":case"T":a&&(t.preventDefault(),u(a,"tie"));break;case"ArrowRight":case"Enter":t.preventDefault(),f();break;case"ArrowLeft":t.preventDefault(),n(e=>Math.max(0,e-1))}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[e,r]);let x=e[r]?{...e[r],comment:l[e[r].comparison_id]||""}:null;return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[(0,s.jsx)(p,{}),(0,s.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)(F,{onDataLoaded:e=>{t(e),n(0),o({}),d({}),m(new Set)},userSelections:i,userComments:l,comparisons:e}),(0,s.jsx)(q,{currentIndex:r,totalComparisons:e.length,onPrevious:()=>n(e=>Math.max(0,e-1)),onNext:f,userSelections:i,userComments:l,comparisons:e,respondedComparisons:c}),x&&(0,s.jsx)(D,{comparison:x,onSelection:u,onCommentChange:(e,t)=>{d(r=>({...r,[e]:t}))},selectedChoice:i[x.comparison_id],isResponded:c.has(x.comparison_id)})]})]})}U.displayName=z.UC.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[709,441,517,358],()=>t(2136)),_N_E=e.O()}]);