(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2136:(e,r,t)=>{Promise.resolve().then(t.bind(t,4764))},4764:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>q});var s=t(5155),a=t(2115),i=t(7725),n=t(2104),o=t(7113),d=t(2317),l=t(1027),c=t(3463),u=t(9795);function m(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,u.QP)((0,c.$)(r))}let f=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),x=a.forwardRef((e,r)=>{let{className:t,variant:a,size:i,asChild:n=!1,...o}=e,l=n?d.DX:"button";return(0,s.jsx)(l,{className:m(f({variant:a,size:i,className:t})),ref:r,...o})});function p(){let{theme:e,setTheme:r}=(0,o.D)();return(0,s.jsx)("nav",{className:"bg-white dark:bg-gray-800 shadow-md",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"LLM Output Comparison"})}),(0,s.jsx)("div",{children:(0,s.jsxs)(x,{variant:"ghost",size:"icon",onClick:()=>r("dark"===e?"light":"dark"),children:[(0,s.jsx)(i.A,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,s.jsx)(n.A,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})})]})})})}x.displayName="Button";let h=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:m("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});h.displayName="Card";let g=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:m("flex flex-col space-y-1.5 p-6",t),...a})});g.displayName="CardHeader";let v=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:m("text-2xl font-semibold leading-none tracking-tight",t),...a})});v.displayName="CardTitle";let b=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:m("text-sm text-muted-foreground",t),...a})});b.displayName="CardDescription";let j=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:m("p-6 pt-0",t),...a})});j.displayName="CardContent",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:m("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter";var y=t(2594),N=t(3565);let w=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(y.bL,{className:m("grid gap-2",t),...a,ref:r})});w.displayName=y.bL.displayName;let k=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(y.q7,{ref:r,className:m("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...a,children:(0,s.jsx)(y.C1,{className:"flex items-center justify-center",children:(0,s.jsx)(N.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});k.displayName=y.q7.displayName;var _=t(6195);let C=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),R=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)(_.b,{ref:r,className:m(C(),t),...a})});R.displayName=_.b.displayName;let L=(0,l.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function A(e){let{className:r,variant:t,...a}=e;return(0,s.jsx)("div",{className:m(L({variant:t}),r),...a})}function D(e){let{comparison:r,onSelection:t,selectedChoice:a,isResponded:i}=e;return(0,s.jsxs)(h,{className:"mb-8",children:[(0,s.jsxs)(g,{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)(v,{children:["Comparison #",r.comparison_id]}),i&&(0,s.jsx)(A,{variant:"outline",children:"Responded"})]}),(0,s.jsxs)(b,{children:["Output ID: ",r.output_id]})]}),(0,s.jsxs)(j,{children:[(0,s.jsx)("div",{className:"grid md:grid-cols-2 gap-4",children:r.model_outputs.map((e,r)=>(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,s.jsxs)("h3",{className:"font-bold text-lg mb-2",children:["Answer ",0===r?"A":"B"]}),(0,s.jsx)("p",{className:"whitespace-pre-wrap",children:e.text})]},r))}),(0,s.jsx)("h4",{className:"text-center font-medium mb-4 mt-6",children:"Which answer do you prefer?"}),(0,s.jsxs)(w,{className:"flex justify-center space-x-4 mt-6",value:a||"",onValueChange:e=>t(r.comparison_id,e),children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(k,{value:"left",id:"left"}),(0,s.jsx)(R,{htmlFor:"left",children:"Answer A"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(k,{value:"right",id:"right"}),(0,s.jsx)(R,{htmlFor:"right",children:"Answer B"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(k,{value:"tie",id:"tie"}),(0,s.jsx)(R,{htmlFor:"tie",children:"Tie"})]})]})]})]})}let E=a.forwardRef((e,r)=>{let{className:t,type:a,...i}=e;return(0,s.jsx)("input",{type:a,className:m("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...i})});function S(e){let{onDataLoaded:r}=e,t=e=>{let t=[...e].sort(()=>Math.random()-.5);t.forEach(e=>{if(.5>Math.random()){let r=e.model_outputs[0];e.model_outputs[0]=e.model_outputs[1],e.model_outputs[1]=r}}),r(t)};return(0,s.jsx)("div",{className:"space-y-4 mb-8",children:(0,s.jsxs)("div",{children:[(0,s.jsx)(R,{htmlFor:"jsonFile",children:"Load JSON file"}),(0,s.jsx)(E,{id:"jsonFile",type:"file",accept:".json",onChange:e=>{var r;let s=null===(r=e.target.files)||void 0===r?void 0:r[0];if(s){let e=new FileReader;e.onload=e=>{try{var r;let s=JSON.parse(null===(r=e.target)||void 0===r?void 0:r.result);t(s)}catch(e){alert("Invalid JSON file.")}},e.readAsText(s)}}})]})})}E.displayName="Input";var z=t(773);let F=z.Kq,O=z.bL,M=z.l9,T=a.forwardRef((e,r)=>{let{className:t,sideOffset:a=4,...i}=e;return(0,s.jsx)(z.UC,{ref:r,sideOffset:a,className:m("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})});function U(e){let{currentIndex:r,totalComparisons:t,onPrevious:a,onNext:i,userSelections:n,comparisons:o,respondedComparisons:d}=e;return(0,s.jsxs)("div",{className:"space-y-4 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-x-2",children:[(0,s.jsx)(x,{onClick:a,disabled:0===r,children:"Previous"}),(0,s.jsx)(x,{onClick:()=>i(),disabled:r===t-1,children:"Next"})]}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:t>0?"".concat(r+1," / ").concat(t):"No comparisons loaded"}),(0,s.jsx)(F,{children:(0,s.jsxs)(O,{children:[(0,s.jsx)(M,{asChild:!0,children:(0,s.jsx)("div",{className:"inline-block",children:(0,s.jsx)(x,{onClick:()=>{let e=[["comparison_id","output_id","chosen_side","chosen_model_id"]];o.forEach(r=>{let t=r.comparison_id,s=r.output_id,a=n[t]||"",i="";"left"===a?i=r.model_outputs[0].model_id:"right"===a?i=r.model_outputs[1].model_id:"tie"===a&&(i="tie"),e.push([t,s,a,i])});let r=new Blob([e.map(e=>e.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(r),s=document.createElement("a");s.href=t,s.download="pairwise_results.csv",s.click(),URL.revokeObjectURL(t)},disabled:0===t||d.size!==t,variant:0===t||d.size!==t?"secondary":"default",children:"Download Results"})})}),(0,s.jsx)(T,{children:0===t?"No comparisons loaded":d.size!==t?"Please answer all ".concat(t," questions before downloading"):"Download your results"})]})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"flex justify-center text-sm text-gray-600 dark:text-gray-400",children:(0,s.jsxs)("span",{children:[d.size," / ",t," responded"]})}),(0,s.jsx)("div",{className:"flex gap-1.5 flex-wrap justify-center",children:o.map((e,t)=>(0,s.jsx)("div",{className:"h-3 w-12 rounded transition-colors cursor-pointer ".concat(d.has(e.comparison_id)?"bg-primary":"bg-secondary"," ").concat(r===t?"ring-1 ring-primary ring-offset-1":""),title:"Question ".concat(t+1).concat(d.has(e.comparison_id)?" - Answered":" - Not answered"),onClick:()=>i(t)},e.comparison_id))})]})]})}function q(){let[e,r]=(0,a.useState)([]),[t,i]=(0,a.useState)(0),[n,o]=(0,a.useState)({}),[d,l]=(0,a.useState)(new Set),c=(e,r)=>{o(t=>({...t,[e]:r})),l(r=>new Set(r).add(e))},u=r=>{"number"==typeof r?i(r):i(r=>Math.min(e.length-1,r+1))};return(0,a.useEffect)(()=>{let r=r=>{var s;if(r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.altKey||r.metaKey||r.ctrlKey)return;let a=null===(s=e[t])||void 0===s?void 0:s.comparison_id;switch(r.key){case"a":case"A":a&&(r.preventDefault(),c(a,"left"));break;case"b":case"B":a&&(r.preventDefault(),c(a,"right"));break;case"t":case"T":a&&(r.preventDefault(),c(a,"tie"));break;case"ArrowRight":case"Enter":r.preventDefault(),u();break;case"ArrowLeft":r.preventDefault(),i(e=>Math.max(0,e-1))}};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e,t,c]),(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900",children:[(0,s.jsx)(p,{}),(0,s.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)(S,{onDataLoaded:e=>{r(e),i(0),o({}),l(new Set)}}),(0,s.jsx)(U,{currentIndex:t,totalComparisons:e.length,onPrevious:()=>i(e=>Math.max(0,e-1)),onNext:u,userSelections:n,comparisons:e,respondedComparisons:d}),e.length>0&&(0,s.jsx)(D,{comparison:e[t],onSelection:c,selectedChoice:n[e[t].comparison_id],isResponded:d.has(e[t].comparison_id)})]})]})}T.displayName=z.UC.displayName}},e=>{var r=r=>e(e.s=r);e.O(0,[709,441,517,358],()=>r(2136)),_N_E=e.O()}]);